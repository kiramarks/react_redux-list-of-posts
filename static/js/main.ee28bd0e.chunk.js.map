{"version":3,"sources":["redux/selectors.ts","redux/store/loading.ts","redux/store/posts.ts","helpers/api.ts","redux/store/error.ts","redux/store/initialized.ts","redux/store/index.ts","components/Search.tsx","helpers/debounce.ts","components/User.tsx","components/Comment.tsx","components/CommentList.tsx","components/Post.tsx","components/PostsList.tsx","App.tsx","index.tsx"],"names":["getLoading","state","isLoading","getPosts","posts","getErrorState","hasError","getInitialized","isInitialized","loadingReducer","loading","action","type","setPosts","postsReducer","map","post","id","postId","comments","filter","comment","commentId","API_URL","fetchPreparedPosts","a","Promise","all","fetch","then","response","json","users","preparedPosts","user","find","userId","setError","value","errorReducer","error","initializedReducer","initialized","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","Search","handleSearch","query","className","onChange","htmlFor","debounce","f","delay","timer","args","clearTimeout","setTimeout","User","name","email","address","href","street","suite","city","Comment","body","dispatch","useDispatch","handleDeleteComment","useCallback","deleteComment","onClick","CommentList","item","key","Post","title","handleDeletePost","PostsList","useState","filteredQuery","setFilteredQuery","setQuery","visiblePosts","useMemo","toLowerCase","includes","setFilteredQueryWithDebounce","e","target","App","useSelector","loadData","isButtonVisible","shouldPostsRender","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ee28bd0e.chunk.js","sourcesContent":["import { RootState } from './store';\n\nexport const getLoading = (state: RootState) => state.isLoading;\nexport const getPosts = (state: RootState) => state.posts;\nexport const getErrorState = (state: RootState) => state.hasError;\nexport const getInitialized = (state: RootState) => state.isInitialized;\n","import { AnyAction } from 'redux';\n\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\nconst loadingReducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return true;\n\n    case FINISH_LOADING:\n      return false;\n\n    default:\n      return loading;\n  }\n};\n\nexport default loadingReducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POSTS = 'SET_POSTS';\nconst DELETE_POST = 'DELETE_POST';\nconst DELETE_COMMENT = 'DELETE_COMMENT';\n\nexport const setPosts = (posts: []) => ({ type: SET_POSTS, posts });\n\nexport const deletePost = (postId: number) => ({\n  type: DELETE_POST,\n  postId,\n});\n\nexport const deleteComment = (postId: number, commentId: number) => ({\n  type: DELETE_COMMENT,\n  postId,\n  commentId,\n});\n\nconst postsReducer = (posts: Post[] = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n    case DELETE_COMMENT:\n      return posts.map(post => (\n        post.id === action.postId\n          ? {\n            ...post,\n            comments: post.comments\n              .filter(comment => comment.id !== action.commentId),\n          } : post));\n    case DELETE_POST:\n      return posts.filter(post => post.id !== action.postId);\n    default:\n      return posts;\n  }\n};\n\nexport default postsReducer;\n","const API_URL = 'https://jsonplaceholder.typicode.com';\n\nconst fetchPosts = () => {\n  return fetch(`${API_URL}/posts`)\n    .then(response => response.json());\n};\n\nconst fetchUsers = () => {\n  return fetch(`${API_URL}/users`)\n    .then(response => response.json());\n};\n\nconst fetchComments = () => {\n  return fetch(`${API_URL}/comments`)\n    .then(response => response.json());\n};\n\nexport const fetchPreparedPosts = async () => {\n  const [posts, users, comments] = await Promise.all(\n    [fetchPosts(), fetchUsers(), fetchComments()],\n  );\n\n  const preparedPosts = posts.map((post: Post) => ({\n    ...post,\n    user: users.find((user: User) => user.id === post.userId),\n    comments: comments.filter((comment: Comment) => comment.postId === post.id),\n  }));\n\n  return preparedPosts;\n};\n","import { AnyAction } from 'redux';\n\nconst SET_ERROR = 'SET_ERROR';\n\nexport const setError = (value: boolean) => ({\n  type: SET_ERROR,\n  value,\n});\n\nconst errorReducer = (error = false, action: AnyAction) => {\n  switch (action.type) {\n    case SET_ERROR:\n      return action.value;\n    default:\n      return error;\n  }\n};\n\nexport default errorReducer;\n","import { AnyAction } from 'redux';\n\nconst SET_INITIALIZED = 'SET_INITIALIZED';\n\nexport const setInitialized = (value: boolean) => ({\n  type: SET_INITIALIZED,\n  value,\n});\n\nconst initializedReducer = (initialized = false, action: AnyAction) => {\n  switch (action.type) {\n    case SET_INITIALIZED:\n      return action.value;\n    default:\n      return initialized;\n  }\n};\n\nexport default initializedReducer;\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Dispatch } from 'react';\n\nimport loadingReducer, { finishLoading, startLoading } from './loading';\nimport postsReducer, { setPosts } from './posts';\nimport { fetchPreparedPosts } from '../../helpers/api';\nimport errorReducer, { setError } from './error';\nimport initializedReducer, { setInitialized } from './initialized';\n\nconst rootReducer = combineReducers({\n  isLoading: loadingReducer,\n  posts: postsReducer,\n  hasError: errorReducer,\n  isInitialized: initializedReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\n\nexport const loadPosts = () => {\n  return async (dispatch: Dispatch<any>) => {\n    dispatch(setError(false));\n    dispatch(startLoading());\n\n    try {\n      const posts = await fetchPreparedPosts();\n\n      dispatch(setPosts(posts));\n    } catch (error) {\n      dispatch(setError(true));\n    }\n\n    dispatch(finishLoading());\n    dispatch(setInitialized(true));\n  };\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","import React from 'react';\n\nexport const Search = ({ handleSearch, query }: SearchProps) => {\n\n  return (\n    <div className=\"row\">\n      <form className=\"col s12\">\n        <div className=\"row\">\n          <div className=\"input-field col s12\">\n            <textarea\n              id=\"textarea1\"\n              value={query}\n              className=\"materialize-textarea\"\n              onChange={handleSearch}\n            />\n            <label htmlFor=\"textarea1\">\n              Type something to search post...\n            </label>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n","function debounce<Params extends any[]>(\n  f: (...args: Params) => any,\n  delay: number,\n): (...args: Params) => void {\n  let timer: NodeJS.Timeout;\n\n  return (...args: Params) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      f(...args);\n    }, delay);\n  };\n}\n\nexport default debounce;\n","import React from 'react';\n\nexport const User = ({ name, email, address }: User) => {\n  return (\n    <section className=\"user post__user\">\n      <p className=\"user__name\">{name}</p>\n      <a href={`mailto:${email}`} className=\"user__email\">\n        {email}\n      </a>\n      <address className=\"user__address\">\n        <div>{`${address.street}, ${address.suite}`}</div>\n        <div>{address.city}</div>\n      </address>\n    </section>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { deleteComment } from '../redux/store/posts';\n\nexport const Comment = ({\n  id, name, body, email, postId,\n}: CommentProps) => {\n  const dispatch = useDispatch();\n  const handleDeleteComment = useCallback(\n    () => dispatch(deleteComment(postId, id)),\n    [dispatch, postId, id]\n  );\n\n  return (\n    <section className=\"post__comment\">\n      <span\n        className=\"comment__delete\"\n        onClick={handleDeleteComment}\n      >\n        Delete comment\n      </span>\n      <p className=\"comment__name\">{name}</p>\n      <p className=\"comment__body\">{body}</p>\n      <a href={`mailto:${email}`} className=\"comment__email\">\n        {email}\n      </a>\n    </section>\n  );\n};\n","import React from 'react';\nimport { Comment } from './Comment';\n\nexport const CommentList = ({ comments, postId }: CommentsProps) => {\n  return (\n    <>\n      <p className=\"comment__heading\">Comments</p>\n      {comments.map((item) =>\n        <Comment key={item.id} {...item} postId={postId} />\n        )}\n    </>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { deletePost } from '../redux/store/posts';\nimport { User } from './User';\nimport { CommentList } from './CommentList';\n\nexport const Post = ({\n  id, title, user, body, comments,\n}: Post) => {\n  const dispatch = useDispatch();\n  const handleDeletePost = useCallback(\n    () => dispatch(deletePost(id)),\n    [dispatch, id]\n  );\n\n  return (\n    <section className=\"post\">\n      <h5 className=\"post__title\">{title}</h5>\n      <span\n        className=\"post__delete\"\n        onClick={handleDeletePost}\n      >\n        Delete post\n      </span>\n      <p className=\"post__body\">{body}</p>\n      <User {...user} />\n      <CommentList comments={comments} postId={id} />\n    </section>\n  );\n};\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Search } from './Search';\nimport debounce from '../helpers/debounce';\nimport { Post } from './Post';\n\nexport const PostsList = ({ posts }: PostsListProps) => {\n  const [filteredQuery, setFilteredQuery] = useState('');\n  const [query, setQuery] = useState('');\n\n  const visiblePosts = useMemo(() => {\n    return posts.filter(post => {\n      const title = post.title.toLowerCase();\n      const body = post.body.toLowerCase();\n\n      return (title + body).includes(filteredQuery.toLowerCase());\n    });\n  }, [posts, filteredQuery]);\n\n  const setFilteredQueryWithDebounce = useCallback(\n    debounce(setFilteredQuery, 1000),\n    [],\n  );\n\n  const handleSearch = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setQuery(e.target.value);\n    setFilteredQueryWithDebounce(e.target.value);\n  }, [setQuery, setFilteredQueryWithDebounce]);\n\n  return (\n    <>\n      <Search handleSearch={handleSearch} query={query} />\n      <article className=\"app__post-list\">\n        {visiblePosts.map((post) => <Post key={post.id} {...post} />)}\n      </article>\n    </>\n  );\n};\n","import React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './App.scss';\n\nimport {\n  getLoading, getPosts, getErrorState, getInitialized,\n} from './redux/selectors';\nimport { loadPosts } from './redux/store';\nimport { PostsList } from './components/PostsList';\n\nconst App = () => {\n  const isLoading = useSelector(getLoading);\n  const isInitialized = useSelector(getInitialized);\n  const posts = useSelector(getPosts);\n  const hasError = useSelector(getErrorState);\n  const dispatch = useDispatch();\n\n  const loadData = () => {\n    dispatch(loadPosts());\n  };\n\n  const isButtonVisible = useMemo(\n    () => !isLoading && !isInitialized,\n    [isLoading, isInitialized]\n  );\n  const shouldPostsRender = useMemo(\n    () => !hasError && !isLoading && isInitialized,\n    [hasError, isLoading, isInitialized]\n  );\n\n  return (\n    <main className=\"app\">\n      <div className=\"app__header\">\n        <h2 className=\"app__heading\">Dynamic list of posts</h2>\n        {isButtonVisible\n        && (\n          <button\n            type=\"button\"\n            className=\"waves-effect waves-light btn deep-purple accent-3\"\n            onClick={loadData}\n          >\n            load data\n          </button>\n        )}\n        {isLoading && <p>Loading...</p>}\n        {hasError && (\n          <button\n            type=\"button\"\n            className=\"waves-effect waves-light btn deep-purple accent-3\"\n            onClick={loadData}\n          >\n            try again\n          </button>\n        )}\n      </div>\n      {shouldPostsRender && <PostsList posts={posts} />}\n    </main>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './redux/store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}