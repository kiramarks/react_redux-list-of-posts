(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{24:function(e,t,n){e.exports=n(36)},33:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),s=n.n(c),o=n(2),u=n(23),l=(n(33),function(e){return e.isLoading}),i=function(e){return e.posts},m=function(e){return e.hasError},p=function(e){return e.isInitialized},d=function(e){return e.query},f=n(7),E=n.n(f),b=n(12),v=n(5),h=n(21),_=n(22),O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"FINISH_LOADING":return!1;default:return e}},y=n(8),j=function(e){return{type:"SET_POSTS",posts:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return t.posts;case"DELETE_COMMENT":return e.map((function(e){return e.id===t.postId?Object(y.a)(Object(y.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.commentId}))}):e}));case"DELETE_POST":return e.filter((function(e){return e.id!==t.postId}));default:return e}},I=n(13),g="https://jsonplaceholder.typicode.com",T=function(){var e=Object(b.a)(E.a.mark((function e(){var t,n,a,r,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fetch("".concat(g,"/posts")).then((function(e){return e.json()})),fetch("".concat(g,"/users")).then((function(e){return e.json()})),fetch("".concat(g,"/comments")).then((function(e){return e.json()}))]);case 2:return t=e.sent,n=Object(I.a)(t,3),a=n[0],r=n[1],c=n[2],s=a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{user:r.find((function(t){return t.id===e.userId})),comments:c.filter((function(t){return t.postId===e.id}))})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){return{type:"SET_ERROR",value:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.value;default:return e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return t.value;default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;default:return e}},C=Object(v.combineReducers)({isLoading:O,posts:N,hasError:S,isInitialized:L,query:k}),D=Object(v.createStore)(C,Object(h.composeWithDevTools)(Object(v.applyMiddleware)(_.a))),x=function(e){var t=e.handleSearch,n=Object(o.c)(d);return r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("textarea",{id:"textarea1",value:n,className:"materialize-textarea",onChange:t}),r.a.createElement("label",{htmlFor:"textarea1"},"Type something to search post...")))))};var R=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,r)}),t)}},A=function(e){var t=e.name,n=e.email,a=e.address;return r.a.createElement("section",{className:"user post__user"},r.a.createElement("p",{className:"user__name"},t),r.a.createElement("a",{href:"mailto:".concat(n),className:"user__email"},n),r.a.createElement("address",{className:"user__address"},r.a.createElement("div",null,"".concat(a.street,", ").concat(a.suite)),r.a.createElement("div",null,a.city)))},M=function(e){var t=e.id,n=e.name,c=e.body,s=e.email,u=e.postId,l=Object(o.b)(),i=Object(a.useCallback)((function(){return l(function(e,t){return{type:"DELETE_COMMENT",postId:e,commentId:t}}(u,t))}),[l,u,t]);return r.a.createElement("section",{className:"post__comment"},r.a.createElement("span",{className:"comment__delete",onClick:i},"Delete comment"),r.a.createElement("p",{className:"comment__name"},n),r.a.createElement("p",{className:"comment__body"},c),r.a.createElement("a",{href:"mailto:".concat(s),className:"comment__email"},s))},F=function(e){var t=e.comments,n=e.postId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"comment__heading"},"Comments"),t.map((function(e){return r.a.createElement(M,Object.assign({key:e.id},e,{postId:n}))})))},P=function(e){var t=e.id,n=e.title,c=e.user,s=e.body,u=e.comments,l=Object(o.b)(),i=Object(a.useCallback)((function(){return l({type:"DELETE_POST",postId:t})}),[l,t]);return r.a.createElement("section",{className:"post"},r.a.createElement("h5",{className:"post__title"},n),r.a.createElement("span",{className:"post__delete",onClick:i},"Delete post"),r.a.createElement("p",{className:"post__body"},s),r.a.createElement(A,c),r.a.createElement(F,{comments:u,postId:t}))},q=function(e){var t=e.posts,n=Object(a.useState)(""),c=Object(I.a)(n,2),s=c[0],u=c[1],l=Object(o.b)(),i=Object(a.useMemo)((function(){return t.filter((function(e){return(e.title.toLowerCase()+e.body.toLowerCase()).includes(s.toLowerCase())}))}),[t,s]),m=Object(a.useCallback)(R(u,1e3),[]),p=Object(a.useCallback)((function(e){l({type:"SET_QUERY",query:e.target.value}),m(e.target.value)}),[l,m]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{handleSearch:p}),r.a.createElement("article",{className:"app__post-list"},i.map((function(e){return r.a.createElement(P,Object.assign({key:e.id},e))}))))},G=function(){var e=Object(o.c)(l),t=Object(o.c)(p),n=Object(o.c)(i),c=Object(o.c)(m),s=Object(o.b)(),u=function(){s(function(){var e=Object(b.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w(!1)),t({type:"START_LOADING"}),e.prev=2,e.next=5,T();case 5:n=e.sent,t(j(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t(w(!0));case 12:t({type:"FINISH_LOADING"}),t({type:"SET_INITIALIZED",value:!0});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())},d=Object(a.useMemo)((function(){return!e&&!t}),[e,t]),f=Object(a.useMemo)((function(){return!c&&!e&&t}),[c,e,t]);return r.a.createElement("main",{className:"app"},r.a.createElement("div",{className:"app__header"},r.a.createElement("h2",{className:"app__heading"},"Dynamic list of posts"),d&&r.a.createElement("button",{type:"button",className:"waves-effect waves-light btn deep-purple accent-3",onClick:u},"load data"),e&&r.a.createElement("p",null,"Loading..."),c&&r.a.createElement("button",{type:"button",className:"waves-effect waves-light btn deep-purple accent-3",onClick:u},"try again")),f&&r.a.createElement(q,{posts:n}))},z=function(){return r.a.createElement(o.a,{store:D},r.a.createElement(u.a,null,r.a.createElement(G,null)))};s.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.1eb773fb.chunk.js.map